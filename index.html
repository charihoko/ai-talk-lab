<!DOCTYPE html>

<html lang="ja">
<head>
<meta charset="utf-8"/>
<title>AIトークラボ！</title>
<style>
    /* 全体基本スタイル */
    body {
      margin: 0;
      padding: 0;
      font-family: "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
      background: #ffffff;
      color: #333333;
    }
    h1, h2, h3 {
      margin: 0;
      padding: 0;
    }
    button {
      cursor: pointer;
      border: none;
      border-radius: 5px;
      padding: 12px 20px;
      font-size: 1rem;
      background-color: #4CAF50;
      color: #ffffff;
      transition: background-color 0.2s;
    }
    button:hover {
      background-color: #43A047;
    }
    /* 画面セクション */
    #title-screen,
    #prologue-screen,
    #quiz-screen,
    #result-screen {
      display: none;
      box-sizing: border-box;
      padding: 20px;
      min-height: 100vh;
    }
    /* タイトル画面スタイル */
    #title-screen {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    #title-screen h1 {
      font-size: 2.2rem;
      margin-bottom: 30px;
    }
    #title-screen .buttons {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    /* プロローグ画面スタイル */
    #prologue-screen {
      position: relative;
    }
    #prologue-dialogue {
      margin-top: 20px;
      font-size: 1.1rem;
      line-height: 1.6;
      min-height: 150px;
    }
    #prologue-controls {
      margin-top: 20px;
      text-align: center;
    }
    /* クイズ画面スタイル */
    #quiz-screen {
      position: relative;
    }
    #episode-title {
      font-size: 1.4rem;
      font-weight: bold;
      text-align: center;
      margin-top: 10px;
    }
    #episode-intro {
      font-size: 1rem;
      text-align: center;
      margin-top: 10px;
      color: #555;
    }
    #progress-display {
      font-size: 0.9rem;
      text-align: center;
      margin-top: 10px;
      color: #777;
    }
    #question {
      margin-top: 20px;
      font-size: 1.2rem;
      line-height: 1.5;
    }
    #choices {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    #choices button {
      background-color: #2196F3;
    }
    #choices button:hover {
      background-color: #1976D2;
    }
    #feedback {
      margin-top: 20px;
      padding: 15px;
      border-radius: 8px;
      background-color: #f9f9f9;
      font-size: 1rem;
      display: none;
    }
    #next-btn {
      margin-top: 20px;
      display: none;
    }
    #score-display {
      position: fixed;
      top: 10px;
      right: 10px;
      padding: 8px 12px;
      background-color: rgba(0, 0, 0, 0.05);
      border-radius: 5px;
      font-size: 0.9rem;
    }
    /* キャラクター表示領域 */
    #character-area {
      width: 100%;
      text-align: center;
      margin-top: 10px;
    }
    #character-area img {
      height: 140px;
      width: auto;
      margin: 0 15px;
    }
    /* 結果画面スタイル */
    #result-screen {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    #result-score {
      font-size: 2.4rem;
      font-weight: bold;
      margin-top: 20px;
    }
    #result-comment {
      font-size: 1.1rem;
      margin-top: 15px;
    }
    #restart-btn {
      margin-top: 30px;
      background-color: #ff9800;
    }
    #restart-btn:hover {
      background-color: #fb8c00;
    }
    /* スピーカー名のスタイル */
    .dialogue-line {
      margin-bottom: 15px;
    }
    .dialogue-line .speaker {
      font-weight: bold;
      margin-right: 6px;
    }
    /* レスポンシブ対応 */
    @media (max-width: 600px) {
      #character-area img {
        height: 110px;
      }
      button {
        font-size: 0.9rem;
        padding: 10px 18px;
      }
      #question {
        font-size: 1.1rem;
      }
    }
  </style>
</head>
<body><img alt="girl normal" src="girl_normal.png" width="100"/>
<img alt="girl happy" src="girl_happy.png" width="100"/>
<img alt="girl sad" src="girl_sad.png" width="100"/>
<img alt="ai bot" src="ai_bot.png" width="100"/>
<!-- タイトル画面 -->
<div id="title-screen">
<h1>AIトークラボ！</h1>
<div class="buttons">
<button id="start-btn">はじめる</button>
<button id="prologue-btn">プロローグを見る</button>
<button id="resume-btn">途中から再開</button>
</div>
</div>
<!-- プロローグ画面 -->
<div id="prologue-screen">
<div id="character-area">
<img alt="girl" id="girl-img-prologue" src="girl_normal.png"/>
<img alt="ai bot" id="ai-img-prologue" src="ai_bot.png"/>
</div>
<div id="prologue-dialogue"></div>
<div id="prologue-controls">
<button id="prologue-next-btn">次へ</button>
<button id="prologue-skip-btn">スキップ</button>
</div>
</div>
<!-- クイズ画面 -->
<div id="quiz-screen">
<div id="score-display"></div>
<div id="character-area">
<img alt="girl" id="girl-img" src="girl_normal.png"/>
<img alt="ai bot" id="ai-img" src="ai_bot.png"/>
</div>
<div id="episode-title"></div>
<div id="episode-intro"></div>
<div id="progress-display"></div>
<div id="question"></div>
<div id="choices"></div>
<div id="feedback"></div>
<button id="next-btn">次の問題へ</button>
</div>
<!-- 結果画面 -->
<div id="result-screen">
<h2>結果発表</h2>
<div id="result-score"></div>
<div id="result-comment"></div>
<button id="restart-btn">最初からやり直す</button>
</div>
<script>
  // 問題データ：15問を5話に整理したもの。説明には学習ポイントを含めています。
  const episodes = [
    {
      "title": "第1話 例を使うかどうか",
      "intro": "この話では、AIに指示する際に例示を使うべきかどうか、そのコツを学んでいきます。",
      "questions": [
        {
          "text": "記事を例示なしで要約してほしい",
          "choices": [
            "例：’要約例1’、’要約例2’。同じ形式で要約してください",
            "この記事を５行で要約してください",
            "この記事をリスト形式でまとめてください"
          ],
          "correct": 1,
          "explanation": "例を示さずに要約をお願いするときは、「〇行でまとめてほしい」など具体的な長さや形式を伝えるとAIが迷わず応えてくれるよ。"
        },
        {
          "text": "サンプルを示した上で同じ形式で翻訳してほしい",
          "choices": [
            "この記事を要約してください",
            "この記事を英語に翻訳してください",
            "例：’これは例文A’、’これは例文B’。同じ形式で翻訳してください"
          ],
          "correct": 2,
          "explanation": "翻訳の文体やフォーマットの見本を示すことで、AIがそのスタイルに合わせて出力できるんだ。"
        },
        {
          "text": "見本を元にキャッチコピーを作ってほしい",
          "choices": [
            "例：’夏の思い出’→’煌めく季節を感じて’。では同じ形式でキャッチコピーを作成してください",
            "新商品についてキャッチコピーを作成してください",
            "以下を３行で要約してください"
          ],
          "correct": 0,
          "explanation": "お手本があると、AIはその雰囲気やパターンを読み取って似たようなキャッチコピーを作りやすくなるよ。"
        }
      ]
    },
    {
      "title": "第2話 話し手を決める",
      "intro": "ここでは、AIにどの立場や役割を演じてもらうか伝えるポイントを学びます。",
      "questions": [
        {
          "text": "営業部長として売上報告を作成してほしい",
          "choices": [
            "今月の売上報告をまとめてください",
            "例：’レポート例1’、’レポート例2’。同じ形式で作成してください",
            "あなたは営業部長です。今月の売上報告をレポート形式で作成してください"
          ],
          "correct": 2,
          "explanation": "AIに役割を伝えると、その立場に合わせた口調や内容でレポートをまとめてくれるよ。\"あなたは営業部長です\"と最初に付け加えよう。"
        },
        {
          "text": "小学生向け講師として説明してほしい",
          "choices": [
            "あなたは小学生向け講師です。この仕組みをやさしく説明してください",
            "この仕組みを専門家向けに説明してください",
            "この仕組みを中学生向けに説明してください"
          ],
          "correct": 0,
          "explanation": "誰に向けて説明してほしいのかを伝えると、その年齢や理解度に合ったやさしい表現で説明してもらえるよ。"
        },
        {
          "text": "編集者として文章を校正してほしい",
          "choices": [
            "以下の文章を翻訳してください",
            "あなたは編集者です。以下の文章を読みやすく校正してください",
            "以下の文章を短くまとめてください"
          ],
          "correct": 1,
          "explanation": "校正をお願いするときは、AIに\"編集者\"という役割を与えることで、読みやすさを意識した添削をしてくれるよ。"
        }
      ]
    },
    {
      "title": "第3話 出力形式を決める",
      "intro": "出力の形式を指定すると、AIがさらに分かりやすい答えを返してくれます。その方法を見てみましょう。",
      "questions": [
        {
          "text": "箇条書きでわかりやすくまとめてほしい",
          "choices": [
            "以下の内容を説明文として書いてください",
            "番号付きリストでまとめてください",
            "以下の内容を５行で要約してください"
          ],
          "correct": 1,
          "explanation": "\"箇条書き\"や\"番号付きリスト\"と指定することで、情報が整理されて読みやすくなるんだ。"
        },
        {
          "text": "文字数100字以内で説明してほしい",
          "choices": [
            "以下をかんたんな日本語で説明してください",
            "以下を英語に翻訳してください",
            "以下を100字以内で説明してください"
          ],
          "correct": 2,
          "explanation": "文字数の制限があるときは、具体的に\"○字以内\"と数字で伝えるのがポイントだよ。"
        },
        {
          "text": "表やリストで整理したいときに使いやすい形式でまとめてほしい",
          "choices": [
            "以下のデータを番号付きリストで出力してください",
            "以下のデータを表形式でまとめてください",
            "以下のデータを箇条書きでまとめてください"
          ],
          "correct": 0,
          "explanation": "順序や項目を整理したいときには、番号付きリスト形式が使いやすいよ。"
        }
      ]
    },
    {
      "title": "第4話 前提を伝える",
      "intro": "説明の対象や前提条件をきちんと伝えることの重要性を学びます。",
      "questions": [
        {
          "text": "中学生向けにわかりやすく説明してほしい",
          "choices": [
            "この仕組みを大学生向けに説明してください",
            "この仕組みを専門家向けに説明してください",
            "この仕組みを中学生向けに分かりやすく説明してください"
          ],
          "correct": 2,
          "explanation": "対象を中学生に指定することで、専門用語を避けたやさしい説明にしてもらえるよ。"
        },
        {
          "text": "最新市場データを基に分析してほしい",
          "choices": [
            "最新の市場データを基に、今後のトレンドを分析してください",
            "市場データをまとめてください",
            "市場データを翻訳してください"
          ],
          "correct": 0,
          "explanation": "分析のもとになるデータや前提条件を明示すると、AIがより的確に分析できるよ。"
        },
        {
          "text": "中高生向けの教材として要約してほしい",
          "choices": [
            "研究者向けにこの内容を要約してください",
            "中高生向けの教材として、この内容を要約してください",
            "ビジネス向けにこの内容を要約してください"
          ],
          "correct": 1,
          "explanation": "対象を中高生と明記することで、その年代に合ったわかりやすい教材として要約してくれるよ。"
        }
      ]
    },
    {
      "title": "第5話 手順を示す",
      "intro": "ステップや論理を示してもらうように依頼することで、理解が深まります。",
      "questions": [
        {
          "text": "ステップを示しながら数学問題を解いてほしい",
          "choices": [
            "問題を解く手順をステップバイステップで示してください",
            "答えだけを教えてください",
            "この問題の解説をお願いします"
          ],
          "correct": 0,
          "explanation": "手順を詳しく知りたいときは、\"ステップバイステップで\"と依頼すると、途中の考え方まで教えてくれるよ。"
        },
        {
          "text": "論理的に理由付けしながらアイデアを出してほしい",
          "choices": [
            "アイデアについて意見を述べてください",
            "このアイデアのメリット・デメリットを論理的ステップで示してください",
            "アイデアのメリット・デメリットを教えてください"
          ],
          "correct": 1,
          "explanation": "メリットとデメリットを論理的な順序で示してもらうと、考えの流れがわかりやすくなるよ。"
        },
        {
          "text": "複雑な手順の要約と確認リストを生成してほしい",
          "choices": [
            "手順を箇条書きでまとめてください",
            "手順を短く要約してください",
            "手順をステップごとに要約し、チェックリスト形式で出力してください"
          ],
          "correct": 2,
          "explanation": "複雑な作業も、チェックリスト形式で各ステップをまとめれば、抜け漏れなく確認できるよ。"
        }
      ]
    }
  ];

  // プロローグの台詞：女の子とAIがプロンプトの基礎について語る
  const prologueDialogs = [
    { speaker: "ユイ", text: "はじめまして！ 私はAIと一緒にプロンプトのコツを学ぶユイだよ。" },
    { speaker: "AI", text: "こんにちは、ユイさん。私はAIのサポート役です。一緒に楽しく学びましょう！" },
    { speaker: "ユイ", text: "ところでプロンプトって、どうやって考えればいいんだろう？" },
    { speaker: "AI", text: "プロンプトとは、AIにしてほしいことや条件を具体的に伝えるための指示文です。内容や形式をはっきり書くことが大切なんですよ。" },
    { speaker: "ユイ", text: "なるほど～。曖昧だと、思った通りの答えが返ってこないこともあるよね。" },
    { speaker: "AI", text: "ええ、目的や出力形式、対象者などをきちんと伝えることで、より理想的な答えが得られます。" },
    { speaker: "ユイ", text: "早く試してみたい！それじゃあ、クイズ形式で学んでみよう！" }
  ];

  // 状態管理用の変数
  let currentEpisodeIndex = 0;
  let currentQuestionIndex = 0;
  let correctCount = 0;
  let prologueIndex = 0;

  // DOM要素の取得
  const titleScreen = document.getElementById('title-screen');
  const prologueScreen = document.getElementById('prologue-screen');
  const quizScreen = document.getElementById('quiz-screen');
  const resultScreen = document.getElementById('result-screen');
  const startBtn = document.getElementById('start-btn');
  const prologueBtn = document.getElementById('prologue-btn');
  const resumeBtn = document.getElementById('resume-btn');
  const prologueNextBtn = document.getElementById('prologue-next-btn');
  const prologueSkipBtn = document.getElementById('prologue-skip-btn');
  const prologueDialogueDiv = document.getElementById('prologue-dialogue');
  const episodeTitleDiv = document.getElementById('episode-title');
  const episodeIntroDiv = document.getElementById('episode-intro');
  const progressDisplayDiv = document.getElementById('progress-display');
  const questionDiv = document.getElementById('question');
  const choicesDiv = document.getElementById('choices');
  const feedbackDiv = document.getElementById('feedback');
  const nextBtn = document.getElementById('next-btn');
  const scoreDisplayDiv = document.getElementById('score-display');
  const girlImg = document.getElementById('girl-img');
  const girlImgPrologue = document.getElementById('girl-img-prologue');
  const resultScoreDiv = document.getElementById('result-score');
  const resultCommentDiv = document.getElementById('result-comment');
  const restartBtn = document.getElementById('restart-btn');

  // 画面の切り替え
  function showScreen(screen) {
    titleScreen.style.display = 'none';
    prologueScreen.style.display = 'none';
    quizScreen.style.display = 'none';
    resultScreen.style.display = 'none';
    screen.style.display = 'block';
  }

  // スタート画面を表示
  function showTitle() {
    // プログレスの有無で再開ボタンの表示切替
    const saved = JSON.parse(localStorage.getItem('aiTalkLabProgress') || 'null');
    if (saved && saved.episodeIndex < episodes.length) {
      resumeBtn.style.display = 'block';
    } else {
      resumeBtn.style.display = 'none';
    }
    showScreen(titleScreen);
  }

  // プロローグを表示
  function startPrologue() {
    prologueIndex = 0;
    girlImgPrologue.src = 'girl_normal.png';
    renderPrologueLine();
    showScreen(prologueScreen);
  }

  // プロローグの一行を表示
  function renderPrologueLine() {
    const line = prologueDialogs[prologueIndex];
    prologueDialogueDiv.innerHTML = '';
    const p = document.createElement('p');
    p.className = 'dialogue-line';
    const speakerSpan = document.createElement('span');
    speakerSpan.className = 'speaker';
    speakerSpan.textContent = line.speaker + '：';
    const textSpan = document.createElement('span');
    textSpan.textContent = line.text;
    p.appendChild(speakerSpan);
    p.appendChild(textSpan);
    prologueDialogueDiv.appendChild(p);
    // 別のキャラのセリフなら表情を変える
    if (line.speaker === 'ユイ') {
      girlImgPrologue.src = 'girl_normal.png';
    } else {
      girlImgPrologue.src = 'girl_happy.png';
    }
  }

  // プロローグの次ボタン
  prologueNextBtn.addEventListener('click', () => {
    prologueIndex++;
    if (prologueIndex >= prologueDialogs.length) {
      // プロローグ終了したらゲーム開始
      startGame();
    } else {
      renderPrologueLine();
    }
  });

  // プロローグスキップ
  prologueSkipBtn.addEventListener('click', () => {
    startGame();
  });

  // ゲーム開始（プロローグ後または直接）
  function startGame() {
    // 進行状態のリセット
    currentEpisodeIndex = 0;
    currentQuestionIndex = 0;
    correctCount = 0;
    // 履歴を削除
    localStorage.removeItem('aiTalkLabProgress');
    updateScoreDisplay();
    showQuestion();
  }

  // 途中から再開
  function resumeGame() {
    const saved = JSON.parse(localStorage.getItem('aiTalkLabProgress') || 'null');
    if (saved) {
      currentEpisodeIndex = saved.episodeIndex;
      currentQuestionIndex = saved.questionIndex;
      correctCount = saved.correctCount;
      updateScoreDisplay();
      showQuestion();
    }
  }

  // クイズ画面を表示し、現在の質問を描画
  function showQuestion() {
    showScreen(quizScreen);
    const episode = episodes[currentEpisodeIndex];
    const questionObj = episode.questions[currentQuestionIndex];
    // タイトルとイントロ
    episodeTitleDiv.textContent = episode.title;
    if (currentQuestionIndex === 0) {
      episodeIntroDiv.textContent = episode.intro;
      episodeIntroDiv.style.display = 'block';
    } else {
      episodeIntroDiv.style.display = 'none';
    }
    // 進捗表示
    progressDisplayDiv.textContent = `第${currentEpisodeIndex + 1}話 ${currentQuestionIndex + 1}/3 問`;
    // 質問
    questionDiv.textContent = questionObj.text;
    // 選択肢
    choicesDiv.innerHTML = '';
    questionObj.choices.forEach((choice, idx) => {
      const btn = document.createElement('button');
      btn.textContent = choice;
      btn.addEventListener('click', () => handleAnswer(idx));
      choicesDiv.appendChild(btn);
    });
    // 前のフィードバック非表示、次へボタン非表示
    feedbackDiv.style.display = 'none';
    nextBtn.style.display = 'none';
    // キャラ表情リセット
    girlImg.src = 'girl_normal.png';
  }

  // 選択肢のクリック処理
  function handleAnswer(selectedIndex) {
    const episode = episodes[currentEpisodeIndex];
    const questionObj = episode.questions[currentQuestionIndex];
    const isCorrect = selectedIndex === questionObj.correct;
    // 選択肢ボタンを無効化
    Array.from(choicesDiv.children).forEach(btn => {
      btn.disabled = true;
      btn.style.opacity = '0.7';
    });
    // スコア計算
    if (isCorrect) {
      correctCount++;
    }
    updateScoreDisplay();
    // フィードバック表示
    const prefix = isCorrect ? 'そのとおり！' : '惜しい…';
    feedbackDiv.textContent = `${prefix} ${questionObj.explanation}`;
    feedbackDiv.style.display = 'block';
    // 女の子の表情更新
    if (isCorrect) {
      girlImg.src = 'girl_happy.png';
    } else {
      girlImg.src = 'girl_sad.png';
    }
    // 次へボタン表示
    nextBtn.style.display = 'block';
    // 保存（次へボタンを押す前に次のインデックスを算出して保存）
    let nextEpisodeIndex = currentEpisodeIndex;
    let nextQuestionIndex = currentQuestionIndex + 1;
    if (nextQuestionIndex >= episodes[currentEpisodeIndex].questions.length) {
      nextEpisodeIndex++;
      nextQuestionIndex = 0;
    }
    const progress = {
      episodeIndex: nextEpisodeIndex,
      questionIndex: nextQuestionIndex,
      correctCount: correctCount
    };
    // ゲーム終了後は保存しない
    if (nextEpisodeIndex < episodes.length) {
      localStorage.setItem('aiTalkLabProgress', JSON.stringify(progress));
    } else {
      localStorage.removeItem('aiTalkLabProgress');
    }
  }

  // スコア表示更新
  function updateScoreDisplay() {
    scoreDisplayDiv.textContent = `正答数：${correctCount} / ${episodes.reduce((sum, ep) => sum + ep.questions.length, 0)}`;
  }

  // 次へボタン処理
  nextBtn.addEventListener('click', () => {
    // 次の問題に進む
    currentQuestionIndex++;
    if (currentQuestionIndex >= episodes[currentEpisodeIndex].questions.length) {
      currentEpisodeIndex++;
      currentQuestionIndex = 0;
    }
    // もしすべての問題が終了したら結果へ
    if (currentEpisodeIndex >= episodes.length) {
      showResult();
    } else {
      showQuestion();
    }
  });

  // 結果表示
  function showResult() {
    showScreen(resultScreen);
    const total = episodes.reduce((sum, ep) => sum + ep.questions.length, 0);
    const scorePercent = Math.round((correctCount / total) * 100);
    resultScoreDiv.textContent = `${scorePercent}点 / 100点`;
    let comment;
    if (scorePercent >= 90) {
      comment = '🌸 花丸！完璧！あなたはプロンプトマスターだね！';
    } else if (scorePercent >= 70) {
      comment = '🎉 よくできました！次はさらに上を目指そう！';
    } else if (scorePercent >= 50) {
      comment = '😊 がんばったね！もう少しで完璧だよ！';
    } else {
      comment = '📖 まずは基本をしっかり押さえよう！もう一度チャレンジしてみてね。';
    }
    resultCommentDiv.textContent = comment;
    // 一応スコアもリセットしておく
    localStorage.removeItem('aiTalkLabProgress');
  }

  // リスタート
  restartBtn.addEventListener('click', () => {
    showTitle();
  });

  // タイトル画面ボタンイベント
  startBtn.addEventListener('click', () => {
    // プロローグをスキップして直接クイズ開始
    startGame();
  });
  prologueBtn.addEventListener('click', () => {
    startPrologue();
  });
  resumeBtn.addEventListener('click', () => {
    resumeGame();
  });

  // 初期表示
  showTitle();
  </script>
</body>
</html>